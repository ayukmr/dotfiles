#!/usr/bin/env zsh

# ===========================
# === Show Battery Charge ===
# ===========================

current_charge="$(ioreg -n AppleSmartBattery -r | grep '"CurrentCapacity" = ' | sed -E 's/\s*"CurrentCapacity" = //')"
max_charge="$(ioreg -n AppleSmartBattery -r | grep '"MaxCapacity" = ' | sed -E 's/\s*"MaxCapacity" = //')"

charge="$(( current_charge * 100 / max_charge ))"

print -P "⎪%F{green}${(l:charge/10::█:)}%K{8}${(l:10-charge/10:: :)}%f%k⎪ $charge%%"
