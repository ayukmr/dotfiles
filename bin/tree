#!/usr/bin/env zsh

# =========================
# === Display File Tree ===
# =========================

local branch="├── "
local indent="    "
local dir=$(print -P "%1d")

if [[ -n $1 ]]; then
    local depth=$1
else
    local depth=500
fi

# use sed to create tree
local tree=$(
    find . -maxdepth $depth |
    sed -E \
        -e "s|./(.+)|$branch%F{green}\1%f|" \
        -e "s|/([^/]+)$|/$branch%F{yellow}\1%f|g" \
        -e "s|[^/]+/|$indent|g" \
        -e "s|^.$|%B%F{cyan}$dir%f%b|"
)

print -P $tree
